service:
  -
    name: demo    # 服务名称
    driver: http-service  # http驱动
    desc: "示例服务"  # 服务描述
    timeout: 30000  # 超时时间，单位：ms
    upstream: www.eolinker.com  #
    retry: 2    # 重试次数，当后端超时时进行重试
    rewrite_url: /  # 转发到后端的具体路径，如果路由是前缀匹配，则会将匹配
    scheme: http-service  # 转发到后端服务的协议，该协议仅当匿名转发的时候生效
    plugins:
      pluginB:
        disable: false
      auth:
        disable: true
        config:
          - jwt@auth
          - apikey@auth
      rewrite_response:
        disable: true
        config:
          body:
          status_code:
          header:

upstream:
  -
    name: product-user
    driver: http_proxy  #必填，所使用的驱动， http_proxy为静态负载
    desc: "生产环境-用户模块"  #非必填，对该负载的描述
    discovery: static_1@discovery  #必填，该负载所使用的服务发现实例
    config: 127.0.0.1:8580 weight=1000;10.1.1.2 weight=10  #负载配置，若该负载使用的是static静态服务发现，则配置是静态接入地址及其权重，格式：addr1 weight1;addr2 weight2;...用分号进行分割
    scheme: http-service  #必填，负载所使用的scheme，仅支持http或https
    type: round-robin  #必填，所使用的负载均衡算法

setting:
  - name: service_plugin
    driver: plugin
    plugins:
      - name: pluginA
        config:
        enable: true
      - name: pluginB
        config:
        enable: true
      - namme: auth
        config:
        enable: true
  - name: upstream_plugin
    driver: plugin
    plugins:
      - name: pluginA
        config:
        enable: true
      - name: pluginB
        config:
        enable: true
      - namme: auth
        config:
        enable: true
